# Stories Schema Definition
# Defines the expected structure for story files

schema_version: "1.0"

# File naming convention
file_naming:
  pattern: "t{tale}.{title-slug}.md"
  tale_format: "zero_padded"  # Format: 01, 02, 03... or 1, 2, 3...
  title_slug_format: "lowercase_hyphenated"  # Convert "My Title" to "my-title"

# Required YAML front matter fields
required_fields:
  - tale
  - title

# Optional YAML front matter fields
optional_fields:
  - story
  - chapter
  - duration
  - tags

# Field definitions and validation rules
field_definitions:
  tale:
    type: "integer"
    description: "Sequential tale number"
    format: "zero_padded_string"  # "01", "02", etc.
    min_value: 1
    max_value: 999
    
  title:
    type: "string"
    description: "Human-readable title of the tale"
    max_length: 100
    required: true
    
  story:
    type: "string"
    description: "Name of the story collection this tale belongs to"
    examples:
      - "But You Said"
      - "I Wrote It Anyway"
      - "I'll Do It Anyway"
      
  chapter:
    type: "integer"
    description: "Chapter number (deprecated - use tale instead)"
    deprecated: true
    migrate_to: "tale"
    
  duration:
    type: "string"
    description: "Estimated reading time"
    pattern: "\\d+min"
    examples: ["2min", "5min", "10min"]
    
  tags:
    type: "array"
    description: "Content tags"
    item_type: "string"
    examples: [["philosophy", "building", "mindset"]]

# Validation rules
validation:
  filename_must_match_yaml: true
  tale_must_be_sequential: false  # Set to true if tales must be 1,2,3... in order
  no_duplicate_tales: true
  title_must_be_unique: false

# Migration rules for legacy files
migration:
  rename_chapter_to_tale: true
  add_missing_story_field: false  # Set story name if missing
  standardize_filename_format: true